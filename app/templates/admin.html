{% extends "base.html" %}

{% block title %}Admin - Weesht{% endblock %}

{% block content %}
<section>
    <h2>Admin Dashboard</h2>

    <div>
        <a href="{{ url_for('main.adduser') }}">Add User</a>
        <a href="{{ url_for('main.auditlog') }}">View Audit Log</a>
    </div>

    <h3>Users</h3>
    <table>
        <thead>
            <tr>
                <th>Username</th>
                <th>Email</th>
                <th>Level</th>
                <th>Created</th>
                <th>Remove</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
                <tr>
                    <td>{{ user["username"] }}</td>
                    <td>{{ user["email_address"] or "-" }}</td>
                    <td>{{ user["level"] if user["level"] is not none else "-" }}</td>
                    <td>{{ user["create_date"] }}</td>
                    <td>
                        <form method="post" action="{{ url_for('main.removeuser') }}">
                            <input type="hidden" name="username" value="{{ user['username'] }}">
                            <button type="submit">Remove</button>
                        </form>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</section>
{% endblock %}